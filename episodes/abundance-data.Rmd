---
title: "Abundance Data"
teaching: 10
exercises: 2
---

:::::::::::::::::::::::::::::::::::::: questions 

- How is organismal abundance data typically stored?
- How is the species abundance distribution used to compare abundance data from differing systems?
- How do we use summary statistics - including Hill numbers - to quantitatively compare species abundance distributions?

::::::::::::::::::::::::::::::::::::::::::::::::

::::::::::::::::::::::::::::::::::::: objectives

After following this episode, participants should be able to...

1. Import and examine organismal abundance data from .csv files
2. Generate species abundance distributions from abundance data
3. Summarize species abundance data using Hill numbers
4. Interpret how different Hill numbers correspond to different patterns in species diversity



::::::::::::::::::::::::::::::::::::::::::::::::



## Setup

For this lesson, we'll need a few packages commonly used in ecology.

```{r package imports}

library(dplyr)
library(ggplot2)
library(hillR)

```

## Introduction

If you've done work in the spheres of population or community ecology, chances are you have already worked some with organismal abundance data - that is, _counts of the population sizes of the different species within a system_. Here, we'll work through some approaches for importing, wrangling, and summarizing abundance data. 


## Data import 

Abundance data are often stored in the `.csv` format. Here, we'll load data from the `data` directory of this lesson.

::: instructor
We'll want to update the data path.

```{r data import}

abundances <- read.csv(here::here("episodes", "data", "abundance_data_cleaned.csv")) 


```

## Data examination

The `abundances` data are simulated data for arthropods in the Hawaiian archipelago. We have real species names (this will be important later!) but computer-simulated occurrence and abundance values. 

Let's look at these data. 


```{r inspect}

head(abundances)




abundances %>%
    select(site, island) %>%
    distinct()
```

We see that we have columns for `island`, `site`, and `GenSp`, and `abundance`. We seem to have one site on each island. `GenSp` is the scientific name (*gen*us *sp*ecies). `abundance` is the total number of individuals of that species "observed" in our (fictitious) survey. 


## Visualization by species and site

As a first step, let's take a look at how species' abundances vary across different sites. We'll do this using the visualization package `ggplot2`.


Let's start by looking at the species composition on Hawaii itself:

```{r}

hawaii_abund <- abundances %>%
    filter(island == "hawaiiisland")

ggplot(hawaii_abund, aes(GenSp, abundance)) +
    geom_col() +
    theme(axis.text.x = element_text(angle = 90, size = 4))

```


This is nearly unreadable because of the high species richness (885!).

It gets harder if we incorporate all the islands:

```{r}

ggplot(abundances, aes(GenSp, abundance)) +
    geom_col() +
    facet_wrap(vars(island), scales = 'free')

```

